<h1 class="px-4 py-2 text-3xl font-bold text-gray-800 mt-6 mb-6 text-center">発注済み商品の編集</h1>
<%= form_with model: @order, url: admin_order_path(@order), local: true do |f| %>
<section class="mb-12">
  <div class="px-4 py-2 overflow-x-auto mb-6 whitespace-nowrap">
    <%# フォームが表示される前にエラーメッセージを表示するためform_withの前に書く %>
    <% if @order.errors.any? %>
      <%# Railsがデフォルトで用意しているエラー用のスタイル（CSS）を適用 %>
      <div id="error_explanation">
        <h2><%= @order.errors.count %> 件のエラーがあります</h2>
        <ul>
          <% @order.errors.full_messages.each do |message| %>
          <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>
    <table class="flex-none w-full text-md border text-left rtl:text-right border-gray-300">
      <thead class="uppercase">
        <tr class="bg-gray-100">
          <th scope="col" class="py-2 px-4 text-gray-700 border-b">項目</th>
          <th scope="col" class="py-2 px-4 text-gray-700 border-b">現在の値</th>
          <th scope="col" class="py-2 px-4 text-gray-700 border-b">変更後の値</th>
        </tr>
      </thead>
      <tbody>
        <tr class="hover:bg-gray-50">
          <td scope="row" class="py-2 px-4 text-gray-700 border-b">企業名</td>
          <td class="py-2 px-4 text-gray-700 border-b"><%= @order.company&.name || "企業情報なし" %></td>
          <td class="py-2 px-4 text-gray-700 border-b">
            <%= f.collection_select :company_id,
                                    Company.all,
                                    :id,
                                    :name,
                                    prompt: "新しい企業を選択" %>
          </td>
        </tr>
        <tr>
          <td class="py-2 px-4 text-gray-700 border-b">商品番号</td>
          <td class="py-2 px-4 text-gray-700 border-b"><%= @order.product_number&.number || "番号なし" %></td>
          <td class="py-2 px-4 text-gray-700 border-b">
            <%= f.collection_select :product_number_id,
                                    ProductNumber.all,
                                    :id,
                                    :number,
                                    prompt: "新しい商品番号を選択" %>
          </td>
        </tr>
        <tr>
          <td class="py-2 px-4 text-gray-700 border-b">色番号</td>
          <td class="py-2 px-4 text-gray-700 border-b"><%= @order.color_number&.color_code || "色番号なし" %></td>
          <td class="py-2 px-4 text-gray-700 border-b">
            <%= f.collection_select :color_number_id,
                                    ColorNumber.all,
                                    :id,
                                    :color_code,
                                    prompt: "新しい色番号を選択" %>
          </td>
        </tr>
        <tr>
          <td class="py-2 px-4 text-gray-700 border-b">ロール数</td>
          <td class="py-2 px-4 text-gray-700 border-b"><%= @order.roll_count || "未設定" %></td>
          <td class="py-2 px-4 text-gray-700 border-b">
            <%= f.number_field :roll_count, placeholder: "新しいロール数を入力" %>
          </td>
        </tr>
        <tr>
          <td class="py-2 px-4 text-gray-700 border-b">数量</td>
          <td class="py-2 px-4 text-gray-700 border-b"><%= @order.quantity || "未設定" %></td>
          <td class="py-2 px-4 text-gray-700 border-b">
            <%= f.number_field :quantity, placeholder: "新しい数量を入力" %>
          </td>
        </tr>
        <tr>
          <td class="py-2 px-4 text-gray-700 border-b">開始日</td>
          <td class="py-2 px-4 text-gray-700 border-b"><%= @order.start_date&.strftime("%Y-%m-%d") || "日付なし" %></td>
          <td class="py-2 px-4 text-gray-700 border-b">
            <%= f.date_field :start_date, placeholder: "新しい開始日を入力" %>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</section>

<!-- 提出ボタン -->
<section class="mb-12">
    <div class="flex justify-center space-x-2">
      <div class="px-2 py-2">
        <%= f.submit '更新', id: 'update-order', class: "inline-block px-4 py-2 bg-purple-500 text-white rounded hover:bg-purple-700" %>
      </div>
      <div class="px-2 py-2">
        <%= link_to '戻る', admin_orders_path, id: 'back', class: "inline-block px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-700" %>
      </div>
<% end %>
